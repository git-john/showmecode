<!DOCTYPE html>
<!--
BeyondAdmin - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.2.0
Version: 1.0.0
Purchase: http://wrapbootstrap.com
-->

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Head -->
<head>
    <meta charset="utf-8" />
    <title>服务发布</title>

    <meta name="description" content="blank page" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!--Basic Styles-->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link id="bootstrap-rtl-link" href="" rel="stylesheet" />
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="assets/css/weather-icons.min.css" rel="stylesheet" />

    <!--Beyond styles-->
    <link id="beyond-link" href="assets/css/beyond.min.css" rel="stylesheet" />
    <link href="assets/css/demo.min.css" rel="stylesheet" />
    <link href="assets/css/typicons.min.css" rel="stylesheet" />
    <link href="assets/css/animate.min.css" rel="stylesheet" />
    <link id="skin-link" href="" rel="stylesheet" type="text/css" />

    <!--Page Related styles-->
    <link href="assets/css/dataTables.bootstrap.css" rel="stylesheet" />

    <!--Skin Script: Place this script in head to load scripts for skins and rtl support-->
    <script src="assets/js/skins.min.js"></script>
</head>
<!-- /Head -->
<!-- Body -->
<body>
<!-- Loading Container -->
<div class="loading-container">
    <div class="loading-progress">
        <div class="rotator">
            <div class="rotator">
                <div class="rotator colored">
                    <div class="rotator">
                        <div class="rotator colored">
                            <div class="rotator colored"></div>
                            <div class="rotator"></div>
                        </div>
                        <div class="rotator colored"></div>
                    </div>
                    <div class="rotator"></div>
                </div>
                <div class="rotator"></div>
            </div>
            <div class="rotator"></div>
        </div>
        <div class="rotator"></div>
    </div>
</div>
<!--  /Loading Container -->
<!-- Navbar -->
<div class="navbar">
    <div class="navbar-inner">
        <div class="navbar-container">
            <!-- Navbar Barnd -->
            <!-- /Navbar Barnd -->
            <!-- Sidebar Collapse -->
            <!-- /Sidebar Collapse -->
            <!-- Account Area and Settings --->
            <div class="navbar-header pull-right">
                <div class="navbar-account">
                    <div class="setting">
                        <a id="btn-setting" title="Setting" href="#">
                            <i class="icon glyphicon glyphicon-cog"></i>
                        </a>
                    </div>
                    <div class="setting-container" style="padding-left: 0;">
                        <a class="btn btn-azure" href="javascript:void(0);"><i class="fa fa-check"></i>综合平台</a>
                        <a class="btn btn-default " href="javascript:void(0);">新平台</a>
                        <a class="btn btn-default " href="javascript:void(0);">XX平台</a>
                        <a class="btn btn-default " href="javascript:void(0);">新平台</a>
                        <a class="btn btn-default " href="javascript:void(0);">XX平台</a>
                        <a class="btn btn-default " href="javascript:void(0);">新平台</a>
                    </div>
                    <!-- Settings -->
                </div>
            </div>
            <!-- /Account Area and Settings -->
        </div>
    </div>
</div>
<!-- /Navbar -->
<!-- Main Container -->
<div class="main-container container-fluid">
    <!-- Page Container -->
    <div class="page-container">
        <!-- Page Sidebar -->
        <div class="page-sidebar" id="sidebar">
            <!-- Page Sidebar Header-->
            <div class="sidebar-header-wrapper">
                <input type="text" class="searchinput" />
                <i class="searchicon fa fa-search"></i>
                <div class="searchhelper"></div>
            </div>
            <!-- /Page Sidebar Header -->
            <!-- Sidebar Menu -->
            <ul class="nav sidebar-menu">
                <!--Dashboard-->
                <li>
                    <a href="index.html">
                        <i class="menu-icon fa fa-book"></i>
                        <span class="menu-text"> 备案管理 </span>
                    </a>
                </li>

                <li>
                    <a href="index2.html">
                        <i class="menu-icon fa fa-book"></i>
                        <span class="menu-text"> 备案管理（未备案情况） </span>
                    </a>
                </li>

                <li>
                    <a href="config.html">
                        <i class="menu-icon fa fa-book"></i>
                        <span class="menu-text"> 配置项管理 </span>
                    </a>
                </li>

                <!--UI Elements-->
                <li class="open">
                    <a href="#" class="menu-dropdown">
                        <i class="menu-icon fa fa-cloud"></i>
                        <span class="menu-text"> 服务管理 </span>
                        <i class="menu-expand"></i>
                    </a>

                    <ul class="submenu">
                        <li>
                            <a href="storage.html">
                                <span class="menu-text">存储管理</span>
                            </a>
                        </li>
                        <li class="active">
                            <a href="deploy.html">
                                <span class="menu-text">服务发布</span>
                            </a>
                        </li>
                        <li>
                            <a href="monitor.html">
                                <span class="menu-text">服务监控</span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li>
                    <a href="person.html">
                        <i class="menu-icon fa fa-user"></i>
                        <span class="menu-text">个人信息</span>
                    </a>
                </li>
            </ul>
            <!-- /Sidebar Menu -->
        </div>
        <!-- /Page Sidebar -->
        <!-- Page Content -->
        <div class="page-content">
            <!-- Page Breadcrumb -->
            <div class="page-breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <i class="fa fa-home"></i>
                        <a href="#">首页</a>
                    </li>
                    <li class="active">配置管理</li>
                </ul>
            </div>
            <!-- /Page Breadcrumb -->
            <!-- Page Header -->
            <div class="page-header position-relative">
                <div class="header-title">
                    <h1>
                        服务发布
                    </h1>
                </div>
                <!--Header Buttons-->
                <div class="header-buttons">
                    <a class="sidebar-toggler" href="#">
                        <i class="fa fa-arrows-h"></i>
                    </a>
                    <a class="refresh" id="refresh-toggler" href="">
                        <i class="glyphicon glyphicon-refresh"></i>
                    </a>
                    <a class="fullscreen" id="fullscreen-toggler" href="#">
                        <i class="glyphicon glyphicon-fullscreen"></i>
                    </a>
                </div>
                <!--Header Buttons End-->
            </div>
            <!-- /Page Header -->
            <!-- Page Body -->
            <div class="page-body">
                <div class="row">
                    <div class="tabbable">
                        <ul class="nav nav-tabs" id="myTab">
                            <li class="active">
                                <a data-toggle="tab" href="#home">
                                    按服务器发布
                                </a>
                            </li>

                            <li class="tab-red">
                                <a data-toggle="tab" href="#profile">
                                    按服务模块发布
                                </a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div id="home" class="tab-pane in active">
                                <div class="widget">
                                    <div class="widget-header ">
                                        <span class="widget-caption text-info">服务器列表</span>
                                    </div>
                                    <div class="widget-body">
                                        <div class="table-toolbar">
                                            <a id="server_new" href="javascript:void(0);" class="btn btn-primary">
                                                添加服务器
                                            </a>
                                        </div>
                                        <table class="table table-striped table-bordered table-hover">
                                            <thead>
                                            <tr>
                                                <th>IP</th>
                                                <th>SSH端口</th>
                                                <th>已发布服务数</th>
                                                <th>操作</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>172.10.1.100</td>
                                                <td>22</td>
                                                <td>5</td>
                                                <td>
                                                    <a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>运行环境测试</a>
                                                    <a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#sm1"><i class="fa fa-edit"></i>发布服务</a>
                                                    <a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div id="profile" class="tab-pane">
                                <div class="widget">
                                    <div class="widget-header ">
                                        <span class="widget-caption text-info">服务列表</span>
                                    </div>
                                    <div class="widget-body">
                                        <table class="table table-striped table-bordered table-hover" id="server_datatable">
                                            <thead>
                                            <tr>
                                                <th>服务名称</th>
                                                <th>jar包</th>
                                                <th>操作</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>tms-ptm</td>
                                                <td>ptm.jar</td>
                                                <td>
                                                    <a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>服务配置</a>
                                                    <a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#sm2"><i class="fa fa-edit"></i>发布服务</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Page Body -->
        </div>
        <!-- /Page Content -->
    </div>
    <!-- /Page Container -->
    <!-- Main Container -->

</div>

<div class="modal fade" id="sm1">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title">按服务器发布</h4>
        </div>
        <div class="modal-body">
            <div class="widget-body">
                <div class="alert alert-info fade in">
                    <button class="close" data-dismiss="alert">
                        ×
                    </button>
                    <i class="fa-fw fa fa-info"></i>
                    <strong>当前服务器IP：</strong> 172.10.100.101
                </div>
                <div class="table-toolbar">
                    <a id="editabledatatable_new" href="javascript:void(0);" class="btn btn-default">
                        添加服务
                    </a>
                </div>
                <table class="table table-striped table-hover table-bordered" id="editabledatatable">
                    <thead>
                    <tr role="row">
                        <th>服务名</th>
                        <th>端口</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>ptm</td>
                        <td>8082</td>
                        <td>
                            <a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#config"><i class="fa fa-edit"></i>服务配置</a>
                            <a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>
                            <a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td>wbs</td>
                        <td>8083</td>
                        <td>
                            <a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#config"><i class="fa fa-edit"></i>服务配置</a>
                            <a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>
                            <a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save</button>
        </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->

<div class="modal fade" id="sm2">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title">按服务发布</h4>
        </div>
        <div class="modal-body">
            <div class="widget-body">
                <div class="alert alert-info fade in">
                    <button class="close" data-dismiss="alert">
                        ×
                    </button>
                    <i class="fa-fw fa fa-info"></i>
                    <strong>当前服务名称：</strong> tms-auth
                </div>
                <div class="table-toolbar">
                    <a id="editabledatatable_new2" href="javascript:void(0);" class="btn btn-default">
                        添加服务
                    </a>
                </div>
                <table class="table table-striped table-hover table-bordered" id="editabledatatable2">
                    <thead>
                    <tr role="row">
                        <th>服务器</th>
                        <th>端口</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>172.10.100.101</td>
                        <td>8082</td>
                        <td>
                            <a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#config"><i class="fa fa-edit"></i>服务配置</a>
                            <a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>
                            <a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td>172.10.100.101</td>
                        <td>8084</td>
                        <td>
                            <a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#config"><i class="fa fa-edit"></i>服务配置</a>
                            <a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>
                            <a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save</button>
        </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->


<div class="modal fade" id="config">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h4 class="modal-title">服务配置</h4>
        </div>
        <div class="modal-body">
            <div class="widget-body">
                <div class="alert alert-info fade in">
                    <button class="close" data-dismiss="alert">
                        ×
                    </button>
                    <i class="fa-fw fa fa-info"></i>
                    <strong>服务器IP：</strong> 192.168.10.101，<strong>服务名称：</strong> tms-auth
                </div>
                <div class="row">
                    <div class="col-lg-12 col-sm-4 col-xs-4">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" checked="checked">
                                <span class="text">工作库（jdbc:oracle:thin:@172.100.1.101:gzk）</span>
                            </label>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-lg-4 col-sm-4 col-xs-4">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" class="inverted" checked="checked">
                                <span class="text">证据库（jdbc:oracle:thin:@172.100.1.101:zjk）</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 col-sm-4 col-xs-4">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" class="colored-success" checked="checked">
                                <span class="text">单点登录redis（172.100.1.101#172.100.1.102#172.100.1.103）</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 col-sm-4 col-xs-4">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" class="colored-success" checked="checked">
                                <span class="text">数据缓存redis（172.100.1.101#172.100.1.102#172.100.1.103）</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-2 control-label no-padding-right">日志路径</label>
                            <div class="col-sm-8">
                                <input type="email" class="form-control" id="inputEmail3" placeholder="请按xxxxx格式输入配置项">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-2 control-label no-padding-right">rpc端口</label>
                            <div class="col-sm-8">
                                <input type="email" class="form-control" id="username" placeholder="请按xxxxx格式输入配置项">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-2 control-label no-padding-right">balabala</label>
                            <div class="col-sm-8">
                                <input type="email" class="form-control" id="password" placeholder="请按xxxxx格式输入配置项">
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save</button>
        </div>
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->

<!--Basic Scripts-->
<script src="assets/js/jquery-2.0.3.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>

<!--Beyond Scripts-->
<script src="assets/js/beyond.min.js"></script>

<!--Page Related Scripts-->
<script src="assets/js/datatable/jquery.dataTables.min.js"></script>
<script src="assets/js/datatable/ZeroClipboard.js"></script>
<script src="assets/js/datatable/dataTables.tableTools.min.js"></script>
<script src="assets/js/datatable/dataTables.bootstrap.min.js"></script>
<script src="assets/js/datatable/datatables-init.js"></script>
<script src="assets/js/bootbox/bootbox.js"></script>
<script src="assets/js/select2/select2.js"></script>

<script>

    var Initiate1 = function () {
        return {
            init: function () {
                var oTable = $('#editabledatatable').dataTable({
                    "sPaginationType": "bootstrap",
                    "bPaginate":false,
                    "bFilter":false,
                    "sDom": "flt<'row DTTTFooter'<'col-sm-6'i><'col-sm-6'p>>",
                    "aoColumns": [
                        null,
                        null,
                        { "bSortable": false }
                    ]
                });

                var isEditing = null;

                //Add New Row
                $('#editabledatatable_new').click(function (e) {
                    e.preventDefault();
                    var aiNew = oTable.fnAddData(['', '',
                        '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>添加配置</a>' +
                        '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>' +
                        '<a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>'
                    ]);
                    var nRow = oTable.fnGetNodes(aiNew[0]);
                    editRow(oTable, nRow);
                    isEditing = nRow;
                });

                function editRow(oTable, nRow) {
                    var aData = oTable.fnGetData(nRow);
                    var jqTds = $('>td', nRow);
                    jqTds[0].innerHTML = '<select><option value="1">ptm</option><option value="2">wbs</option></select>';
                    jqTds[1].innerHTML = '<input type="text" class="form-control input-small" value="' + aData[1] + '">';
                    jqTds[2].innerHTML = '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>服务配置</a>' +
                        '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>' +
                        '<a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>'
                }


            }

        };
    }();

    var Initiate2 = function () {
        return {
            init: function () {
                var oTable = $('#editabledatatable2').dataTable({
                    "sPaginationType": "bootstrap",
                    "bPaginate":false,
                    "bFilter":false,
                    "sDom": "flt<'row DTTTFooter'<'col-sm-6'i><'col-sm-6'p>>",
                    "aoColumns": [
                        null,
                        null,
                        { "bSortable": false }
                    ]
                });

                var isEditing = null;

                //Add New Row
                $('#editabledatatable_new2').click(function (e) {
                    e.preventDefault();
                    var aiNew = oTable.fnAddData(['', '',
                        '<a href="#" class="btn btn-info btn-xs edit" data-toggle="modal" data-target="#config"><i class="fa fa-edit"></i>服务配置</a>' +
                        '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>' +
                        '<a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>'
                    ]);
                    var nRow = oTable.fnGetNodes(aiNew[0]);
                    editRow(oTable, nRow);
                    $(".select").select2({
                        placeholder: "选择一个或多个服务器",
                        allowClear: true
                    });
                    isEditing = nRow;
                });

                function editRow(oTable, nRow) {
                    var aData = oTable.fnGetData(nRow);
                    var jqTds = $('>td', nRow);
                    jqTds[0].innerHTML = '<select class="select" multiple="multiple" style="width: 100%;"><option value="1">192.168.1.101</option><option value="2">192.168.1.102</option></select>';
                    jqTds[1].innerHTML = '<input type="text" class="form-control input-small" value="' + aData[1] + '">';
                    jqTds[2].innerHTML = '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>添加配置</a>' +
                        '<a href="#" class="btn btn-info btn-xs edit"><i class="fa fa-edit"></i>启动服务</a>' +
                        '<a href="#" class="btn btn-danger btn-xs delete"><i class="fa fa-trash-o"></i>删除</a>'
                }


            }

        };
    }();

    Initiate1.init();
    Initiate2.init();
</script>
</body>
<!--  /Body -->
</html>
